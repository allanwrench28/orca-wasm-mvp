# Emscripten environment configuration
# Auto-generated by setup.ps1 (portable bash)

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
REPO_DIR="$(cd "$SCRIPT_DIR/../.." && pwd)"

# Prefer environment EMSDK if set, else repo-local emsdk
EMSDK_PATH="${EMSDK:-$REPO_DIR/emsdk}"

# Convert Windows path to Unix when under MSYS/Cygwin
if command -v cygpath >/dev/null 2>&1; then
    EMSDK_PATH="$(cygpath -u "$EMSDK_PATH")"
fi

if [ -f "$EMSDK_PATH/emsdk_env.sh" ]; then
    # shellcheck disable=SC1090
    source "$EMSDK_PATH/emsdk_env.sh"
elif [ -f "/opt/emsdk/emsdk_env.sh" ]; then
    # shellcheck disable=SC1091
    source "/opt/emsdk/emsdk_env.sh"
else
    echo "Warning: Emscripten environment not found"
fi